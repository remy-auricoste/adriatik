<section class="map">
    <svg>
        <g>
            <path ng-repeat="territory in game.territories track by territory.id"
                  ng-attr-d="{{territory.path}}"
                  class="area"
                  ng-class="{over: territory.over, neighbour: territory.isNeighbour, sea: territory.type === 'sea', owned: territory.owner}"
                  ng-mouseover="onMouseOver($event, territory)"
                  ng-mouseout="onMouseOut(territory)"
                  ng-click="onClick(territory)"
                  style="{{territory.owner ? 'stroke: '+territory.owner.color : ''}}"
                  stroke="black"
                    >
            </path>
        </g>
    </svg>
    <div ng-repeat="territory in game.territories track by territory.id"
         class="icon-container"
         style="left: {{territory.box.x}}px; top: {{territory.box.y}}px; width: {{territory.box.width}}px; height: {{territory.box.height}}px;"
            >
      <div>
        <icon ng-repeat="unit in territory.units"
                size="{{unitSize}}"
                file-name="{{unit.type.name}}"
                class="image"
                ng-class="{selected: unit.selected}"
                ng-click="toggleUnit(unit)"
                ></icon><icon ng-repeat="building in territory.buildings track by $index"
              size="{{unitSize}}"
              file-name="{{building.name}}"
              class="image"
              ng-click="selectBuilding(building)"
              ></icon><icon ng-repeat="i in [] | range:territory.getIncome()"
              size="{{unitSize}}"
              file-name="sesterce"
              class="image"
              ></icon>
      </div>
    </div>
</section>
